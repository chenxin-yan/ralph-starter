# =============================================================================
# Ralph Configuration
# =============================================================================
# This file is automatically sourced by start.sh if it exists.
# Environment variables take precedence over these values.
# File paths can be relative (to this directory) or absolute.

# -----------------------------------------------------------------------------
# Agent Command
# -----------------------------------------------------------------------------
# The CLI command used to run the AI agent.
# The prompt will be passed as the LAST argument to this command.
# Examples:
#   opencode run            (OpenCode: runs with message as argument)
#   claude -p --dangerously-skip-permissions  (Claude Code CLI with auto-approve)
RALPH_AGENT_CMD="${RALPH_AGENT_CMD:-opencode run}"

# -----------------------------------------------------------------------------
# Model Selection (OpenCode only)
# -----------------------------------------------------------------------------
# Model to use in the format "provider/model". Leave empty to use agent default.
# Examples:
#   anthropic/claude-opus-4-5
#   anthropic/claude-sonnet-4-5
#   openai/gpt-4o
#   google/gemini-2.5-pro
#   ollama/qwen3:8b-16k
# Run "opencode models" to see all available models.
RALPH_MODEL="${RALPH_MODEL:-anthropic/claude-opus-4-6}"

# -----------------------------------------------------------------------------
# File Paths
# -----------------------------------------------------------------------------
# Task file containing the project tasks in JSON format
RALPH_PRD_FILE="${RALPH_PRD_FILE:-prd.json}"

# Progress log where the agent appends session summaries
RALPH_PROGRESS_FILE="${RALPH_PROGRESS_FILE:-progress.md}"

# System prompt sent to the agent each iteration
RALPH_PROMPT_FILE="${RALPH_PROMPT_FILE:-PROMPT.md}"

# Project specification document
RALPH_SPEC_FILE="${RALPH_SPEC_FILE:-SPEC.md}"

# -----------------------------------------------------------------------------
# Completion Detection
# -----------------------------------------------------------------------------
# String the agent outputs to signal task completion
RALPH_COMPLETE_SIGNAL="${RALPH_COMPLETE_SIGNAL:-RALPH_TASK_COMPLETE}"

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Regex pattern to detect rate limit errors in agent output
RALPH_RATE_LIMIT_PATTERN="${RALPH_RATE_LIMIT_PATTERN:-rate.limit|429|quota.exceeded|too.many.requests}"

# Cooldown period in seconds when rate limit is detected
RALPH_RATE_LIMIT_COOLDOWN="${RALPH_RATE_LIMIT_COOLDOWN:-60}"

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log file for script output. To disable logging, comment out or set to empty:
# RALPH_LOG_FILE=""
RALPH_LOG_FILE="${RALPH_LOG_FILE:-ralph.log}"
